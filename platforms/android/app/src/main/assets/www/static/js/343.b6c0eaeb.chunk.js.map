{"version":3,"sources":["components/utility/layoutContent.style.js","components/utility/layoutContent.js","helpers/superFetch.js","helpers/authHelper.js","containers/AuthCheck.js","components/utility/layoutWrapper.style.js","components/utility/layoutWrapper.js","../node_modules/jwt-decode/lib/index.js","../node_modules/jwt-decode/lib/base64_url_decode.js","../node_modules/jwt-decode/lib/atob.js"],"names":["LayoutContentStyle","styled","div","palette","customHeader","Accept","Authorization","localStorage","getItem","undefined","base","method","url","data","fetch","jwtConfig","fetchUrl","headers","body","JSON","stringify","then","response","json","res","catch","error","SuperFetch","forEach","bind","login","userInfo","a","async","username","password","post","checkExpirity","token","profile","jwtDecode","expiredAt","exp","Date","getTime","e","console","log","this","get","status","message","AuthCheck","state","loading","checkDemo","setState","AuthHelper","checkDemoPage","props","idToken","result","notification","style","height","onClick","Component","connect","Auth","LayoutContentWrapper","className","children","base64_url_decode","require","InvalidTokenError","prototype","Error","name","module","exports","options","pos","header","parse","split","atob","str","output","replace","length","decodeURIComponent","m","p","code","charCodeAt","toString","toUpperCase","b64DecodeUnicode","err","InvalidCharacterError","window","input","String","bs","buffer","bc","idx","charAt","fromCharCode","indexOf"],"mappings":"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","file":"static/js/343.b6c0eaeb.chunk.js","sourcesContent":["import styled from 'styled-components';\r\nimport { palette } from 'styled-theme';\r\n\r\nconst LayoutContentStyle = styled.div`\r\n  width: 100%;\r\n  padding: 35px;\r\n  background-color: #ffffff;\r\n  border: 1px solid ${palette('border', 0)};\r\n  height: 100%;\r\n`;\r\n\r\nexport default LayoutContentStyle;\r\n","import LayoutContentStyle from './layoutContent.style';\r\n\r\nexport default LayoutContentStyle;\r\n","import { jwtConfig } from '../settings';\r\n\r\nconst customHeader = () => ({\r\n  'Content-Type': 'application/json',\r\n  Accept: 'application/json',\r\n  Authorization: 'Bearer ' + localStorage.getItem('id_token') || undefined,\r\n});\r\n\r\nconst base = (method, url, data = {}) => {\r\n  return fetch(`${jwtConfig.fetchUrl}${url}`, {\r\n    method,\r\n    headers: customHeader(),\r\n    body: JSON.stringify(data),\r\n  })\r\n    .then(response => response.json())\r\n    .then(res => res)\r\n    .catch(error => ({ error: 'Server Error' }));\r\n};\r\n\r\nconst SuperFetch = {};\r\n['get', 'post', 'put', 'delete'].forEach(method => {\r\n  SuperFetch[method] = base.bind(null, method);\r\n});\r\nexport default SuperFetch;\r\n","import jwtDecode from 'jwt-decode';\r\nimport SuperFetch from './superFetch';\r\n\r\nclass AuthHelper {\r\n  login = async userInfo => {\r\n    if (!userInfo.username || !userInfo.password) {\r\n      return { error: 'please fill in the input' };\r\n    }\r\n    return await SuperFetch.post('login', userInfo).then(response => {\r\n      return this.checkExpirity(response.token);\r\n    });\r\n  };\r\n  async checkDemoPage(token) {\r\n    if (this.checkExpirity(token).error) {\r\n      return { error: 'Token expired' };\r\n    }\r\n    return await SuperFetch.get('secret/test', { token })\r\n      .then(response => ({\r\n        status: '200',\r\n        message: 'Success',\r\n      }))\r\n      .catch(error => ({ error: JSON.stringify(error) }));\r\n  }\r\n  checkExpirity = token => {\r\n    if (!token) {\r\n      return {\r\n        error: 'not matched',\r\n      };\r\n    }\r\n    try {\r\n      const profile = jwtDecode(token);\r\n\r\n      const expiredAt = profile.expiredAt || profile.exp * 1000;\r\n\r\n      if (expiredAt > new Date().getTime()) {\r\n        return {\r\n          ...profile,\r\n          token,\r\n          expiredAt: new Date(expiredAt),\r\n        };\r\n      } else {\r\n        return { error: 'Token expired' };\r\n      }\r\n    } catch (e) {\r\n      console.log(e);\r\n\r\n      return { error: 'Server Error' };\r\n    }\r\n  };\r\n}\r\nexport default new AuthHelper();\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport LayoutContentWrapper from '../components/utility/layoutWrapper';\r\nimport LayoutContent from '../components/utility/layoutContent';\r\nimport Button from '../components/uielements/button';\r\nimport notification from '../components/notification';\r\nimport AuthHelper from '../helpers/authHelper';\r\n\r\nclass AuthCheck extends Component {\r\n  state = { loading: false };\r\n  checkDemo = () => {\r\n    this.setState({ loading: true });\r\n    AuthHelper.checkDemoPage(this.props.idToken).then(result => {\r\n      if (result.error) {\r\n        notification('error', result.error);\r\n      } else {\r\n        notification('success', `status: ${result.status}`, result.message);\r\n      }\r\n      this.setState({ loading: false });\r\n    });\r\n  };\r\n  render() {\r\n    return (\r\n      <LayoutContentWrapper style={{ height: '100vh' }}>\r\n        <LayoutContent>\r\n          <Button loading={this.state.loading} onClick={this.checkDemo}>\r\n            Check Auth Status\r\n          </Button>\r\n        </LayoutContent>\r\n      </LayoutContentWrapper>\r\n    );\r\n  }\r\n}\r\nexport default connect(\r\n  state => ({\r\n    idToken: state.Auth.idToken,\r\n  }),\r\n  {}\r\n)(AuthCheck);\r\n","import styled from \"styled-components\";\r\n\r\nconst LayoutContentWrapper = styled.div`\r\n  padding: 10px 20px 10px 20px;\r\n  display: flex;\r\n  flex-flow: row wrap;\r\n  overflow: hidden;\r\n\r\n  @media only screen and (max-width: 767px) {\r\n    padding: 5px 20px 30px 20px;\r\n  }\r\n\r\n  @media (max-width: 580px) {\r\n    padding: 5px 20px 30px 20px;\r\n  }\r\n`;\r\n\r\nexport { LayoutContentWrapper };\r\n","import React from \"react\";\r\nimport { LayoutContentWrapper } from \"./layoutWrapper.style\";\r\n\r\nexport default props => (\r\n  <LayoutContentWrapper\r\n    className={\r\n      props.className != null\r\n        ? `${props.className} isoLayoutContentWrapper`\r\n        : \"isoLayoutContentWrapper\"\r\n    }\r\n    {...props}\r\n  >\r\n    {props.children}\r\n  </LayoutContentWrapper>\r\n);\r\n","'use strict';\n\nvar base64_url_decode = require('./base64_url_decode');\n\nfunction InvalidTokenError(message) {\n  this.message = message;\n}\n\nInvalidTokenError.prototype = new Error();\nInvalidTokenError.prototype.name = 'InvalidTokenError';\n\nmodule.exports = function (token,options) {\n  if (typeof token !== 'string') {\n    throw new InvalidTokenError('Invalid token specified');\n  }\n\n  options = options || {};\n  var pos = options.header === true ? 0 : 1;\n  try {\n    return JSON.parse(base64_url_decode(token.split('.')[pos]));\n  } catch (e) {\n    throw new InvalidTokenError('Invalid token specified: ' + e.message);\n  }\n};\n\nmodule.exports.InvalidTokenError = InvalidTokenError;\n","var atob = require('./atob');\n\nfunction b64DecodeUnicode(str) {\n  return decodeURIComponent(atob(str).replace(/(.)/g, function (m, p) {\n    var code = p.charCodeAt(0).toString(16).toUpperCase();\n    if (code.length < 2) {\n      code = '0' + code;\n    }\n    return '%' + code;\n  }));\n}\n\nmodule.exports = function(str) {\n  var output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n  switch (output.length % 4) {\n    case 0:\n      break;\n    case 2:\n      output += \"==\";\n      break;\n    case 3:\n      output += \"=\";\n      break;\n    default:\n      throw \"Illegal base64url string!\";\n  }\n\n  try{\n    return b64DecodeUnicode(output);\n  } catch (err) {\n    return atob(output);\n  }\n};\n","/**\n * The code was extracted from:\n * https://github.com/davidchambers/Base64.js\n */\n\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\nfunction InvalidCharacterError(message) {\n  this.message = message;\n}\n\nInvalidCharacterError.prototype = new Error();\nInvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\nfunction polyfill (input) {\n  var str = String(input).replace(/=+$/, '');\n  if (str.length % 4 == 1) {\n    throw new InvalidCharacterError(\"'atob' failed: The string to be decoded is not correctly encoded.\");\n  }\n  for (\n    // initialize result and counters\n    var bc = 0, bs, buffer, idx = 0, output = '';\n    // get next character\n    buffer = str.charAt(idx++);\n    // character found in table? initialize bit storage and add its ascii value;\n    ~buffer && (bs = bc % 4 ? bs * 64 + buffer : buffer,\n      // and if not first of each 4 characters,\n      // convert the first 8 bits to one ascii character\n      bc++ % 4) ? output += String.fromCharCode(255 & bs >> (-2 * bc & 6)) : 0\n  ) {\n    // try to find character in table (0-63, not found => -1)\n    buffer = chars.indexOf(buffer);\n  }\n  return output;\n}\n\n\nmodule.exports = typeof window !== 'undefined' && window.atob && window.atob.bind(window) || polyfill;\n"],"sourceRoot":""}